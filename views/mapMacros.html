{% include "snippetMacros.html" %}

{% macro renderMapLocations(items, pageUrl, classname) %}
  {% if items %}
    {% for item in items %}
      {{ renderMapLocation(item, pageUrl, classname) }}
    {% endfor %}
  {% else %}
    <h4>There are no map locations yet.</h4>
  {% endif %}
{% endmacro %}

{% macro renderMapLocation(item, pageUrl, classname) %}
  <li class="apos-location {{classname}} {% for tag in item.tags %} {{ tag | replace(' ','-') }}{% endfor %}" data-location-id="{{item._id}}">
    <a href="#">{{ item.title | e }}</a>
  </li>
{% endmacro %}

{% macro renderGoogleMap(mapItems, mapOptions={}) %}
  {% set _id = 'apos-map-canvas-' + aposGenerateId() %}
  <div class="apos-map-canvas" id="{{ _id }}"></div>

  {# load in the google maps apis #}
  {# instantiate a new AposGoogleMap #}
  <script type="text/javascript">
    $(function() {
      new AposGoogleMap({{ aposPruneMapLocations(mapItems) | json }}, {{ _id | json }}, {{ mapOptions | json }});
    });
  </script>
{% endmacro %}
